<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="MyAirton">
<meta name="theme-color" content="#ffffff">

<title>MyAirton Connect - ContrÃ´leur de Climatisation Intelligent</title>
<meta name="description" content="Pilotez votre climatiseur Airton Tuya/Smart Life avec cette interface PWA lÃ©gÃ¨re. ContrÃ´le de tempÃ©rature, mode auto-nettoyage et suivi d'usage sans intermÃ©diaire.">
<meta name="keywords" content="climatisation, Tuya, Smart Life, PWA, domotique, contrÃ´leur clim, Airton, auto-nettoyage">
<meta name="author" content="Mikefri">
<meta name="robots" content="index, follow">

<meta property="og:type" content="website">
<meta property="og:url" content="https://clim-airton.vercel.app/">
<meta property="og:title" content="MyAirton Connect - Votre Clim en PWA">
<meta property="og:description" content="L'interface web rapide pour piloter votre confort. Installation facile sur Ã©cran d'accueil.">
<meta property="og:image" content="icon.png">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="MyAirton Connect">
<meta name="twitter:description" content="ContrÃ´leur de clim intelligent et privÃ© pour appareils compatibles Tuya.">
<meta name="twitter:image" content="icon.png">

<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" type="image/png" href="icon.png">
<link rel="stylesheet" href="style.css">
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js')
      .then(() => console.log("Service Worker EnregistrÃ©"));
  }
</script>

    

    <title>Airton Pro Control Premium</title>

</head>
<body>

    <div id="status-msg">Connexion...</div>

    
    <div class="card" id="main-ui">
        <button onclick="openHelp()" style="position:absolute; top:15px; right:15px; border:none; background:#f1f3f5; border-radius:50%; width:35px; height:35px; cursor:pointer; font-weight:bold; color:var(--primary);">?</button>

      <div id="power-badge" style="position: absolute; top: 15px; left: 20px; font-size: 0.75rem; font-weight: 800; padding: 4px 10px; border-radius: 20px; text-transform: uppercase; letter-spacing: 0.5px;">
    --
</div>
        <div class="temp-room" id="room-val">Sonde : --Â°C</div>
        <div class="temp-main" id="set-val">--Â°C</div>
        
        <div class="stats-grid">
            <div class="stat-box">Consom. <b id="elec-val">-- W</b></div>
            <div class="stat-box">Minuteur <b id="timer-val">-- min</b></div>
            <div class="stat-box">Usage Tot. <b id="total-time">-- h</b></div>
        </div>

        <div class="temp-controls">
            <button class="btn-circle" onclick="adjustTemp(-10)">âˆ’</button>
            <button class="btn-circle" onclick="adjustTemp(10)">+</button>
        </div>

        <div class="section-title">Alimentation & Mode</div>
        <div class="grid">
            <button class="btn pwr-on" onclick="runCommand('Power', true)">ON</button>
            <button class="btn pwr-off" onclick="runCommand('Power', false)">OFF</button>
            <button class="btn" id="mode-cold" onclick="runCommand('mode', 'cold')">â„ï¸ Froid</button>
            <button class="btn" id="mode-heat" onclick="runCommand('mode', 'heat')">ğŸ”¥ Chaud</button>
            <button class="btn" id="mode-auto" onclick="runCommand('mode', 'auto')">ğŸ”„ Auto</button>
            <button class="btn" id="mode-wet" onclick="runCommand('mode', 'wet')">ğŸ’§ Sec</button>
            <button class="btn" id="mode-fan" onclick="runCommand('mode', 'fan')">ğŸ’¨ Vent.</button>
            <button class="btn" id="feat-heat8" onclick="toggleBool('heat8')">ğŸ  8Â°C</button>
        </div>

        <div class="section-title">Ventilation & Turbo</div>
        <div class="grid">
            <button class="btn" id="fan-mute" onclick="runCommand('windspeed', 'mute')">ğŸ¤« Mute</button>
            <button class="btn" id="fan-low" onclick="runCommand('windspeed', 'low')">Lent</button>
            <button class="btn" id="fan-mid" onclick="runCommand('windspeed', 'mid')">Moyen</button>
            <button class="btn" id="fan-high" onclick="runCommand('windspeed', 'high')">Fort</button>
            <button class="btn" id="fan-turbo" onclick="runCommand('windspeed', 'turbo')" style="grid-column: span 2; background: #ffeaa7; border: 1px solid #fbc531;">ğŸš€ TURBO</button>
            <button class="btn" id="fan-auto" onclick="runCommand('windspeed', 'auto')" style="grid-column: span 2;">ğŸ”„ Auto Speed</button>
        </div>

        <div class="section-title">Oscillations & Flux</div>
        <div class="grid">
            <button class="btn" id="shake-all" onclick="runCommand('windshake', 'all')">ğŸ”„ 3D</button>
            <button class="btn" id="shake-ud" onclick="runCommand('windshake', 'un_down')">â†•ï¸ H-B</button>
            <button class="btn" id="shake-lr" onclick="runCommand('windshake', 'left_right')">â†”ï¸ G-D</button>
            <button class="btn" id="shake-off" onclick="runCommand('windshake', 'off')">ğŸ›‘ Stop</button>
        </div>
        <div class="grid" style="grid-template-columns: 1fr 1fr;">
            <div>
                <label style="font-size:0.6rem; color:var(--soft)">Vertical</label>
                <select id="select-vert" onchange="runCommand('vertical', this.value)">
                    <option value="off">Auto</option><option value="1">Pos 1</option><option value="2">Pos 2</option>
                    <option value="3">Pos 3</option><option value="4">Pos 4</option><option value="5">Pos 5</option>
                </select>
            </div>
            <div>
                <label style="font-size:0.6rem; color:var(--soft)">Horizontal</label>
                <select id="select-horiz" onchange="runCommand('horizontal', this.value)">
                    <option value="off">Auto</option><option value="same">Direct</option><option value="opposite">OpposÃ©</option>
                </select>
            </div>
        </div>

        <div class="section-title">Options AvancÃ©es</div>
        <div class="grid">
            <button class="btn" id="feat-eco" onclick="toggleBool('mode_ECO')">ğŸƒ Ã‰co</button>
            <button class="btn" id="feat-light" onclick="toggleBool('light')">ğŸ’¡ Light</button>
            <button class="btn" id="feat-health" onclick="toggleBool('health')">âœ¨ SantÃ©</button>
            <button class="btn" id="feat-sleep" onclick="toggleBool('sleep')">ğŸŒ™ Nuit</button>
            <button class="btn" id="feat-clean" onclick="toggleBool('clean')" style="grid-column: span 4; color:var(--danger); border: 1px dashed var(--danger);">ğŸ§¼ Lancer Auto-Nettoyage (Clean)</button>
        </div>

        <div id="sync-label">DerniÃ¨re synchro : --:--:--</div>
        <button style="background:none; border:none; color:var(--soft); cursor:pointer; margin-top:15px; font-size: 0.7rem; text-decoration: underline;" onclick="toggleView(true)">Modifier Configuration</button>
    </div>

    <div id="helpModal" class="modal">
        <div class="modal-content">
            <h2 style="color:var(--primary); margin-top:0;">Guide d'utilisation</h2>
            
            <div class="help-item"><b>ğŸŒ¡ï¸ TempÃ©rature</b><span>Utilisez + et - pour rÃ©gler la consigne entre 16Â°C et 32Â°C. La valeur "Sonde" est la tempÃ©rature rÃ©elle de votre piÃ¨ce.</span></div>
            <div class="help-item"><b>â„ï¸ Modes</b><span><b>Froid :</b> Climatisation. <b>Chaud :</b> Chauffage. <b>Sec :</b> DÃ©shumidification. <b>Fan :</b> Ventilateur seul. <b>8Â°C :</b> Hors-gel pour Ã©viter que la maison ne gÃ¨le en hiver.</span></div>
            <div class="help-item"><b>ğŸš€ Turbo & Ventilation</b><span>Le mode Turbo force la puissance maximale. Mute est idÃ©al pour dormir (silence total).</span></div>
            <div class="help-item"><b>ğŸ”„ Oscillations (3D)</b><span>Permet de diriger l'air partout (All), seulement horizontalement ou verticalement. Vous pouvez aussi fixer un angle prÃ©cis via les menus dÃ©roulants.</span></div>
            <div class="help-item"><b>ğŸƒ Options</b><span><b>Ã‰co :</b> RÃ©duit la consommation. <b>SantÃ© :</b> Active l'ioniseur d'air. <b>Light :</b> Ã‰teint l'affichage sur l'appareil. <b>Clean :</b> Fonction Auto-Nettoyage (Clean) (cycle de 15-30min).</span></div>
            <div class="help-item"><b>âš¡ Stats</b><span>Affiche la consommation rÃ©elle en Watts et le temps d'utilisation total depuis l'installation.</span></div>
            
            <button class="btn pwr-on" style="width:100%" onclick="closeHelp()">J'AI COMPRIS</button>
        </div>
    </div>

<div class="card" id="config-section" style="display:none;">
    <h3 style="margin-top:0; color:var(--primary); font-size: 1.4rem;">Configuration Tuya Cloud</h3>
    
    <div style="text-align: left; font-size: 0.78rem; background: #eef2f7; padding: 16px; border-radius: 16px; margin-bottom: 20px; line-height: 1.5; color: #455a64;">
        <p style="margin-top:0; font-size: 0.85rem; color: #2c3e50;"><strong>Comment obtenir vos accÃ¨s ?</strong></p>
        <ol style="padding-left: 18px; margin-bottom: 0;">
            <li>CrÃ©ez un compte sur <a href="https://iot.tuya.com/" target="_blank" style="color:var(--primary); text-decoration:none; font-weight:600;">iot.tuya.com</a>.</li>
            <li>CrÃ©ez un "Cloud Project" et liez votre compte Smart Life (onglet <b>Devices > Link Tuya App</b>).</li>
            <li>Copiez l'<b>Access ID</b> et le <b>Secret</b> dans l'onglet "Overview".</li>
            <li>Copiez le <b>Device ID</b> depuis l'onglet "Devices".</li>
        </ol>
    </div>

    <div class="config-input-group">
        <input type="text" id="cfg-id" placeholder="ğŸ‘¤ Tuya Access ID">
    </div>
    <div class="config-input-group">
        <input type="password" id="cfg-sec" placeholder="ğŸ” Tuya Access Secret">
    </div>
    <div class="config-input-group">
        <input type="text" id="cfg-dev" placeholder="ğŸ†” ID de l'appareil (Device ID)">
    </div>
    
    <button class="btn pwr-on" style="width:100%; padding: 16px; margin-top: 10px; border-radius: 14px; font-size: 0.9rem;" onclick="saveConfig()">ENREGISTRER & CONNEXION</button>
    <button class="btn" style="width:100%; margin-top:12px; padding: 12px; background: #f1f3f5; color: #78909c; border-radius: 12px;" onclick="toggleView(false)">RETOUR</button>
    
    <p style="font-size: 0.65rem; color: var(--soft); margin-top: 20px; line-height: 1.3;">
        ğŸ”’ <b>SÃ©curitÃ© :</b> Vos identifiants sont stockÃ©s uniquement sur votre appareil (localStorage) et ne transitent jamais par nos serveurs.
    </p>
</div>

<script src="script.js"></script>
</body>
</html>
